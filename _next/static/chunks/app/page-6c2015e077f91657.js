(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{73892:function(e,t,n){Promise.resolve().then(n.bind(n,92695))},55775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(47043);n(57437),n(2265);let l=r._(n(15602));function s(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,l.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let r=n(18993);function l(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},15602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=n(57437),l=n(2265),s=n(81523),a=n(70049);function o(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},i=function(e){let t={...d,...e},n=(0,l.lazy)(()=>t.loader().then(o)),i=t.loading;function c(e){let o=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,d=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(a.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(l.Suspense,{fallback:o,children:d})}return c.displayName="LoadableComponent",c}},70049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let r=n(57437),l=n(20544);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,l.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,r.jsx)(r.Fragment,{children:s.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},92695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(57437),l=n(2265),s=n(55775),a=n.n(s);let o=a()(()=>Promise.all([n.e(566),n.e(425),n.e(938),n.e(636),n.e(663),n.e(498),n.e(399),n.e(143),n.e(848),n.e(79)]).then(n.bind(n,76215)).then(e=>({default:e.Camera})),{loadableGenerated:{webpack:()=>[76215]},ssr:!1}),d=a()(()=>n.e(228).then(n.bind(n,35228)).then(e=>({default:e.AudioEngine})),{loadableGenerated:{webpack:()=>[35228]},ssr:!1});function i(){let[e,t]=(0,l.useState)(null),[s,a]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),[b,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){try{let e=await Promise.all([n.e(566),n.e(425),n.e(938),n.e(636),n.e(663),n.e(498),n.e(399),n.e(143),n.e(178)]).then(n.bind(n,72919));await e.ready(),c(!0),setTimeout(()=>{h(!0)},500)}catch(e){console.error("TensorFlow.jsの読み込みに失敗しました:",e)}}()},[]);let p=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640,max:1280},height:{ideal:480,max:720},facingMode:"user"},audio:!1})).getTracks().forEach(e=>e.stop()),f(!0),m(null)}catch(e){console.error("カメラへのアクセスに失敗しました:",e),e instanceof DOMException?"NotAllowedError"===e.name?m("カメラへのアクセスが拒否されました。ブラウザの設定でカメラへのアクセスを許可してください。"):"NotFoundError"===e.name?m("カメラが見つかりません。カメラが接続されているか確認してください。"):"NotReadableError"===e.name?m("カメラにアクセスできません。別のアプリがカメラを使用している可能性があります。"):m("カメラエラー: ".concat(e.message||"不明なエラーが発生しました")):m("不明なエラーが発生しました")}},j=()=>{a(!s)};return(0,l.useEffect)(()=>{let e=e=>{"Space"===e.code&&(e.preventDefault(),j())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[s,j]),(0,r.jsxs)("main",{className:"min-h-screen p-4 md:p-8 flex flex-col",children:[(0,r.jsxs)("header",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center",children:"MotionJam"}),(0,r.jsx)("p",{className:"text-center text-gray-500",children:"動きで音楽を作ろう"})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col items-center",children:i?(0,r.jsx)("div",{className:"w-full max-w-2xl",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"※カメラの使用許可を求められたら「許可」を選択してください"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"※初回ロード時はモデルのダウンロードに時間がかかることがあります"})]}),b&&(0,r.jsx)(o,{onPoseDetected:e=>{t(e)}}),(0,r.jsx)("div",{className:"mt-6 flex justify-center",children:(0,r.jsx)("button",{className:"px-6 py-3 rounded-full text-white font-medium transition-all ".concat(s?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"),onClick:j,disabled:!b,children:s?"停止":"開始"})}),(0,r.jsx)(d,{pose:e,isPlaying:s})]}):(0,r.jsxs)("div",{className:"mb-8 p-6 bg-yellow-50 border border-yellow-400 rounded-lg text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"カメラアクセスが必要です"}),(0,r.jsx)("p",{className:"mb-4",children:"このアプリはカメラを使用して動きを検出します。「カメラを有効にする」ボタンをクリックして、カメラへのアクセスを許可してください。"}),x&&(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 p-3 mb-4 rounded",children:[(0,r.jsx)("p",{className:"font-bold",children:"エラー"}),(0,r.jsx)("p",{className:"text-sm",children:x}),(0,r.jsx)("button",{onClick:()=>{-1!==navigator.userAgent.indexOf("Chrome")?window.open("chrome://settings/content/camera"):-1!==navigator.userAgent.indexOf("Firefox")?window.open("about:preferences#privacy"):-1!==navigator.userAgent.indexOf("Safari")?alert("Safari -> 設定 -> Webサイト設定からカメラの権限を許可してください"):alert("お使いのブラウザの設定でカメラアクセスを許可してください")},className:"mt-2 text-xs bg-red-500 hover:bg-red-700 text-white py-1 px-2 rounded",children:"ブラウザ設定を開く"})]}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",onClick:p,children:"カメラを有効にする"})]})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"TensorFlow.jsを読み込んでいます..."})]})}),(0,r.jsx)("footer",{className:"mt-8 text-center text-sm text-gray-500",children:(0,r.jsx)("p",{children:"MotionJam \xa9 2025"})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=73892)}),_N_E=e.O()}]);